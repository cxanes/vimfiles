#!/usr/bin/perl
# modified from EPIC <www.epic-ide.org/>

use Devel::Refactor;

my $subName     = $ARGV[0];
my $codeSnippet = do { local $/; <STDIN> };
my $delimiter   = exists($ARGV[1]) ? $ARGV[1] : "\n";

my $refactory = new Devel::Refactor();
my ($newSubCall, $newCode) =
  $refactory->extract_subroutine($subName, $codeSnippet);

print $newSubCall . $delimiter . $newCode;
